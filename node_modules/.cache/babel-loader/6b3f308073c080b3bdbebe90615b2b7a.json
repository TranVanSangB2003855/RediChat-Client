{"remainingRequest":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\src\\services\\socketio.service.js","dependencies":[{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\src\\services\\socketio.service.js","mtime":1676999015178},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676947860410},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1676947861784},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\eslint-loader\\index.js","mtime":1676947845504}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9PbmVEcml2ZSAtIHZycmpkL0Rlc2t0b3AvUmVkaUNoYXQvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovT25lRHJpdmUgLSB2cnJqZC9EZXNrdG9wL1JlZGlDaGF0L2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkQ6L09uZURyaXZlIC0gdnJyamQvRGVza3RvcC9SZWRpQ2hhdC9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IHsgaW8gfSBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKCnZhciBTb2NrZXRpb1NlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFNvY2tldGlvU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTb2NrZXRpb1NlcnZpY2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic29ja2V0Iiwgdm9pZCAwKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNoYXRSb29tIiwgJycpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFNvY2tldGlvU2VydmljZSwgW3sKICAgIGtleTogInNldHVwU29ja2V0Q29ubmVjdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0dXBTb2NrZXRDb25uZWN0aW9uKHRva2VuKSB7CiAgICAgIHRoaXMuc29ja2V0ID0gaW8ocHJvY2Vzcy5lbnYuVlVFX0FQUF9TT0NLRVRfRU5EUE9JTlQsIHsvLyBhdXRoOiB7CiAgICAgICAgLy8gICB0b2tlbiwKICAgICAgICAvLyB9LAogICAgICAgIC8vIHByZVJvb206IChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY2hhdFJvb20iKSk/bG9jYWxTdG9yYWdlLmdldEl0ZW0oImNoYXRSb29tIik6IiIKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCJDb25uZWN0aW5nIHNvY2tldC4uLiIsIHRva2VuKTsKICAgICAgdGhpcy5zb2NrZXQub24oJ215IGJyb2FkY2FzdCcsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIH0pOwogICAgfSAvLyBzdWJzY3JpYmVUb01lc3NhZ2VzKGNiKSB7CiAgICAvLyAgIGlmICghdGhpcy5zb2NrZXQpIHJldHVybih0cnVlKTsKICAgIC8vICAgdGhpcy5zb2NrZXQub24oJ21lc3NhZ2UnLCBtc2cgPT4gewogICAgLy8gICAgIGNvbnNvbGUubG9nKCdSb29tIGV2ZW50IHJlY2VpdmVkIScpOwogICAgLy8gICAgIHJldHVybiBjYihudWxsLCBtc2cpOwogICAgLy8gICB9KTsKICAgIC8vIH0KCiAgfSwgewogICAga2V5OiAicmVjZWl2ZU1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlY2VpdmVNZXNzYWdlKGNiKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXQpIHJldHVybiB0cnVlOwogICAgICB0aGlzLnNvY2tldC5vbigicmVjZWl2ZU1lc3NhZ2UiLCBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgIHJldHVybiBjYihudWxsLCB7CiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgbmFtZTogIlN0cmFuZ2VyIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzdGF0dXNSb29tIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGF0dXNSb29tKGNiKSB7CiAgICAgIGlmICghdGhpcy5zb2NrZXQpIHJldHVybiB0cnVlOwogICAgICB0aGlzLnNvY2tldC5vbigic3RhdHVzUm9vbSIsIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICAgICAgcmV0dXJuIGNiKG51bGwsIHsKICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICBuYW1lOiAiQm90IgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0Um9vbSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFJvb20oKSB7CiAgICAgIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjaGF0Um9vbSIpKTsKCiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY2hhdFJvb20iKSkgewogICAgICAgIHRoaXMuc29ja2V0LmVtaXQoIm5leHRSb29tIiwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImNoYXRSb29tIikpOwogICAgICB9CiAgICB9IC8vIHNlbmRNZXNzYWdlKHttZXNzYWdlLCByb29tTmFtZX0sIGNiKSB7CiAgICAvLyAgIGlmICh0aGlzLnNvY2tldCkgdGhpcy5zb2NrZXQuZW1pdCgnbWVzc2FnZScsIHsgbWVzc2FnZSwgcm9vbU5hbWUgfSwgY2IpOwogICAgLy8gfQoKICB9LCB7CiAgICBrZXk6ICJzZW5kTWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UobWVzc2FnZSwgY2IpIHsKICAgICAgaWYgKHRoaXMuc29ja2V0KSB0aGlzLnNvY2tldC5lbWl0KCdzZW5kTWVzc2FnZScsIG1lc3NhZ2UsIGNiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkaXNjb25uZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0KCkgewogICAgICBpZiAodGhpcy5zb2NrZXQpIHsKICAgICAgICB0aGlzLnNvY2tldC5kaXNjb25uZWN0KCk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBTb2NrZXRpb1NlcnZpY2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IG5ldyBTb2NrZXRpb1NlcnZpY2UoKTsgLy8gaW1wb3J0IHsgaW8gfSBmcm9tICdzb2NrZXQuaW8tY2xpZW50JzsKLy8gY2xhc3MgU29ja2V0aW9TZXJ2aWNlIHsKLy8gICBzb2NrZXQ7Ci8vICAgY29uc3RydWN0b3IoKSB7fQovLyAgIHNldHVwU29ja2V0Q29ubmVjdGlvbigpIHsKLy8gICAgIHRoaXMuc29ja2V0ID0gaW8ocHJvY2Vzcy5lbnYuVlVFX0FQUF9TT0NLRVRfRU5EUE9JTlQpOwovLyAgICAgdGhpcy5zb2NrZXQuZW1pdCgnbXkgbWVzc2FnZScsICdIZWxsbyB0aGVyZSBmcm9tIFZ1ZS4nKTsKLy8gICAgIHRoaXMuc29ja2V0Lm9uKCdteSBicm9hZGNhc3QnLCAoZGF0YSkgPT4gewovLyAgICAgICBjb25zb2xlLmxvZyhkYXRhLCB0aGlzLnNvY2tldCk7Ci8vICAgICB9KTsKLy8gICB9Ci8vICAgZGlzY29ubmVjdCgpIHsKLy8gICAgIGlmKHRoaXMuc29ja2V0KSB7Ci8vICAgICAgIHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKTsKLy8gICAgIH0KLy8gICB9Ci8vIH0KLy8gZXhwb3J0IGRlZmF1bHQgbmV3IFNvY2tldGlvU2VydmljZSgpOw=="},{"version":3,"sources":["D:/OneDrive - vrrjd/Desktop/RediChat/client/src/services/socketio.service.js"],"names":["io","SocketioService","token","socket","process","env","VUE_APP_SOCKET_ENDPOINT","console","log","on","data","cb","message","name","localStorage","getItem","emit","disconnect"],"mappings":";;;AAAA,SAASA,EAAT,QAAmB,kBAAnB;;IAEMC,e;AAGJ,6BAAc;AAAA;;AAAA;;AAAA,sCADJ,EACI;AAAE;;;;WAEhB,+BAAsBC,KAAtB,EAA6B;AAC3B,WAAKC,MAAL,GAAcH,EAAE,CAACI,OAAO,CAACC,GAAR,CAAYC,uBAAb,EAAsC,CACpD;AACA;AACA;AACA;AAJoD,OAAtC,CAAhB;AAMAC,MAAAA,OAAO,CAACC,GAAR,yBAAoCN,KAApC;AAEA,WAAKC,MAAL,CAAYM,EAAZ,CAAe,cAAf,EAA+B,UAACC,IAAD,EAAU;AACvCH,QAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACD,OAFD;AAGD,K,CAED;AACA;AACA;AACA;AACA;AACA;AACA;;;;WACA,wBAAeC,EAAf,EAAkB;AAChB,UAAG,CAAC,KAAKR,MAAT,EAAiB,OAAO,IAAP;AACjB,WAAKA,MAAL,CAAYM,EAAZ,CAAe,gBAAf,EAAiC,UAAAG,OAAO,EAAI;AAC1C,eAAOD,EAAE,CAAC,IAAD,EAAO;AAACC,UAAAA,OAAO,EAAPA,OAAD;AAAUC,UAAAA,IAAI,EAAE;AAAhB,SAAP,CAAT;AACD,OAFD;AAGD;;;WAED,oBAAWF,EAAX,EAAc;AACZ,UAAG,CAAC,KAAKR,MAAT,EAAiB,OAAO,IAAP;AACjB,WAAKA,MAAL,CAAYM,EAAZ,CAAe,YAAf,EAA6B,UAAAG,OAAO,EAAI;AACtC,eAAOD,EAAE,CAAC,IAAD,EAAO;AAACC,UAAAA,OAAO,EAAPA,OAAD;AAAUC,UAAAA,IAAI,EAAE;AAAhB,SAAP,CAAT;AACD,OAFD;AAGD;;;WAED,oBAAU;AACRN,MAAAA,OAAO,CAACC,GAAR,CAAYM,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;;AACA,UAAGD,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAH,EAAoC;AAClC,aAAKZ,MAAL,CAAYa,IAAZ,CAAiB,UAAjB,EAA4BF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAA5B;AACD;AACF,K,CAED;AACA;AACA;;;;WAEA,qBAAYH,OAAZ,EAAqBD,EAArB,EAAyB;AACvB,UAAG,KAAKR,MAAR,EAAgB,KAAKA,MAAL,CAAYa,IAAZ,CAAiB,aAAjB,EAA+BJ,OAA/B,EAAuCD,EAAvC;AACjB;;;WAED,sBAAa;AACX,UAAG,KAAKR,MAAR,EAAgB;AACd,aAAKA,MAAL,CAAYc,UAAZ;AACD;AACF;;;;;;AAGH,eAAe,IAAIhB,eAAJ,EAAf,C,CAIA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["import { io } from 'socket.io-client';\n\nclass SocketioService {\n  socket;\n  chatRoom ='';\n  constructor() {}\n\n  setupSocketConnection(token) {\n    this.socket = io(process.env.VUE_APP_SOCKET_ENDPOINT, {\n      // auth: {\n      //   token,\n      // },\n      // preRoom: (localStorage.getItem(\"chatRoom\"))?localStorage.getItem(\"chatRoom\"):\"\"\n    });\n    console.log(`Connecting socket...`, token);\n\n    this.socket.on('my broadcast', (data) => {\n      console.log(data);\n    });\n  }\n\n  // subscribeToMessages(cb) {\n  //   if (!this.socket) return(true);\n  //   this.socket.on('message', msg => {\n  //     console.log('Room event received!');\n  //     return cb(null, msg);\n  //   });\n  // }\n  receiveMessage(cb){\n    if(!this.socket) return true;\n    this.socket.on(\"receiveMessage\", message => {\n      return cb(null, {message, name: \"Stranger\"});\n    })\n  }\n\n  statusRoom(cb){\n    if(!this.socket) return true;\n    this.socket.on(\"statusRoom\", message => {\n      return cb(null, {message, name: \"Bot\"});\n    })\n  }\n\n  nextRoom(){\n    console.log(localStorage.getItem(\"chatRoom\"))\n    if(localStorage.getItem(\"chatRoom\")){\n      this.socket.emit(\"nextRoom\",localStorage.getItem(\"chatRoom\"));\n    }\n  }\n  \n  // sendMessage({message, roomName}, cb) {\n  //   if (this.socket) this.socket.emit('message', { message, roomName }, cb);\n  // }\n\n  sendMessage(message, cb) {\n    if(this.socket) this.socket.emit('sendMessage',message,cb);\n  }\n  \n  disconnect() {\n    if(this.socket) {\n      this.socket.disconnect();\n    }\n  }\n}\n\nexport default new SocketioService();\n\n\n\n// import { io } from 'socket.io-client';\n\n// class SocketioService {\n//   socket;\n//   constructor() {}\n\n//   setupSocketConnection() {\n//     this.socket = io(process.env.VUE_APP_SOCKET_ENDPOINT);\n//     this.socket.emit('my message', 'Hello there from Vue.');\n    \n//     this.socket.on('my broadcast', (data) => {\n//       console.log(data, this.socket);\n//     });\n//   }\n  \n//   disconnect() {\n//     if(this.socket) {\n//       this.socket.disconnect();\n//     }\n//   }\n// }\n\n// export default new SocketioService();"]}]}