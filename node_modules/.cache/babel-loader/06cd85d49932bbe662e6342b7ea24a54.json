{"remainingRequest":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\babel-loader\\lib\\index.js!D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\src\\App.vue?vue&type=template&id=7ba5bd90","dependencies":[{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\src\\App.vue","mtime":1677001761858},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676947860410},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1676947861784},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1676947841760},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1676947860410},{"path":"D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1676947841100}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgd2l0aE1vZGlmaWVycyBhcyBfd2l0aE1vZGlmaWVycywgdlNob3cgYXMgX3ZTaG93LCB3aXRoRGlyZWN0aXZlcyBhcyBfd2l0aERpcmVjdGl2ZXMsIHJlbmRlckxpc3QgYXMgX3JlbmRlckxpc3QsIEZyYWdtZW50IGFzIF9GcmFnbWVudCwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUVsZW1lbnRCbG9jayBhcyBfY3JlYXRlRWxlbWVudEJsb2NrLCB0b0Rpc3BsYXlTdHJpbmcgYXMgX3RvRGlzcGxheVN0cmluZywgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHZNb2RlbFRleHQgYXMgX3ZNb2RlbFRleHQgfSBmcm9tICJ2dWUiOwp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogIkFwcCIKfTsKdmFyIF9ob2lzdGVkXzIgPSB7CiAgc3R5bGU6IHsKICAgICJkaXNwbGF5IjogImZsZXgiLAogICAgImZsZXgtZGlyZWN0aW9uIjogInJvdyIsCiAgICAianVzdGlmeS1jb250ZW50IjogInN0YXJ0IgogIH0KfTsKCnZhciBfaG9pc3RlZF8zID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImJ1dHRvbiIsIHsKICB0eXBlOiAic3VibWl0Igp9LCAiQ2hhdCB24bubaSBuZ8aw4budaSBs4bqhIG7DoG8gISIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF80ID0gewogIGNsYXNzOiAiYm94Igp9Owp2YXIgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogIm1lc3NhZ2VzIgp9Owp2YXIgX2hvaXN0ZWRfNiA9IHsKICBrZXk6IDAsCiAgc3R5bGU6IHsKICAgICJ0ZXh0LWFsaWduIjogImxlZnQiCiAgfQp9Owp2YXIgX2hvaXN0ZWRfNyA9IHsKICBrZXk6IDEsCiAgc3R5bGU6IHsKICAgICJ0ZXh0LWFsaWduIjogInJpZ2h0IgogIH0KfTsKCnZhciBfaG9pc3RlZF84ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIHsKICBjbGFzczogIm1lc3NhZ2VzIgp9LCBudWxsLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfOSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgdHlwZTogInN1Ym1pdCIKfSwgIlN1Ym1pdCIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJmb3JtIiwgewogICAgb25TdWJtaXQ6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuc3VibWl0VG9rZW4gJiYgJG9wdGlvbnMuc3VibWl0VG9rZW4uYXBwbHkoJG9wdGlvbnMsIGFyZ3VtZW50cyk7CiAgICB9LCBbInByZXZlbnQiXSkpCiAgfSwgW19jcmVhdGVDb21tZW50Vk5vZGUoIiA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkVudGVyIHRva2VuXCIgdi1tb2RlbD1cInRva2VuXCIgLz4gIiksIF9ob2lzdGVkXzNdLCAzMgogIC8qIEhZRFJBVEVfRVZFTlRTICovCiAgKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVFbGVtZW50Vk5vZGUoImJ1dHRvbiIsIHsKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuc3RvcENoYXQoKTsKICAgIH0pCiAgfSwgIlN0b3AiLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdlNob3csICRkYXRhLnN0b3BdXSksIF93aXRoRGlyZWN0aXZlcyhfY3JlYXRlRWxlbWVudFZOb2RlKCJidXR0b24iLCB7CiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLm5leHRSb29tKCk7CiAgICB9KQogIH0sICJOZXh0IiwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZTaG93LCAkZGF0YS5uZXh0XV0pXSksIF9jcmVhdGVFbGVtZW50Vk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF81LCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkZGF0YS5tZXNzYWdlcywgZnVuY3Rpb24gKHVzZXIpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCB7CiAgICAgIGtleTogdXNlci5pZAogICAgfSwgW3VzZXIubmFtZSA9PT0gJ1N0cmFuZ2VyJyB8fCB1c2VyLm5hbWUgPT09ICdCb3QnID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfNiwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImIiLCBudWxsLCBfdG9EaXNwbGF5U3RyaW5nKHVzZXIubmFtZSkgKyAiOiIsIDEKICAgIC8qIFRFWFQgKi8KICAgICksIF9jcmVhdGVUZXh0Vk5vZGUoIiAiICsgX3RvRGlzcGxheVN0cmluZyh1c2VyLm1lc3NhZ2UpLCAxCiAgICAvKiBURVhUICovCiAgICApXSkpIDogKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfNywgW19jcmVhdGVUZXh0Vk5vZGUoX3RvRGlzcGxheVN0cmluZyh1c2VyLm1lc3NhZ2UpICsgIiAiLCAxCiAgICAvKiBURVhUICovCiAgICApLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJiIiwgbnVsbCwgIjoiICsgX3RvRGlzcGxheVN0cmluZyh1c2VyLm5hbWUpLCAxCiAgICAvKiBURVhUICovCiAgICApXSkpXSwgNjQKICAgIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICAgKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0pLCBfaG9pc3RlZF84LCBfY3JlYXRlRWxlbWVudFZOb2RlKCJmb3JtIiwgewogICAgY2xhc3M6ICJpbnB1dC1kaXYiLAogICAgb25TdWJtaXQ6IF9jYWNoZVs0XSB8fCAoX2NhY2hlWzRdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJG9wdGlvbnMuc3VibWl0TWVzc2FnZSAmJiAkb3B0aW9ucy5zdWJtaXRNZXNzYWdlLmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSwgWyJwcmV2ZW50Il0pKQogIH0sIFtfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaW5wdXQiLCB7CiAgICB0eXBlOiAidGV4dCIsCiAgICBwbGFjZWhvbGRlcjogIlR5cGUgaW4gdGV4dCIsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJGRhdGEuaW5wdXRNZXNzYWdlVGV4dCA9ICRldmVudDsKICAgIH0pCiAgfSwgbnVsbCwgNTEyCiAgLyogTkVFRF9QQVRDSCAqLwogICksIFtbX3ZNb2RlbFRleHQsICRkYXRhLmlucHV0TWVzc2FnZVRleHRdXSksIF9ob2lzdGVkXzldLCAzMgogIC8qIEhZRFJBVEVfRVZFTlRTICovCiAgKV0pXSk7Cn0="},{"version":3,"sources":["D:\\OneDrive - vrrjd\\Desktop\\RediChat\\client\\src\\App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"App\">\n    <div style=\"display: flex; flex-direction: row; justify-content: start;\">\n      <form @submit.prevent=\"submitToken\">\n        <!-- <input type=\"text\" placeholder=\"Enter token\" v-model=\"token\" /> -->\n        <button type=\"submit\">Chat với người lạ nào !</button>\n      </form>\n      <button @click=\"stopChat()\" v-show=\"stop\">Stop</button>\n      <button @click=\"nextRoom()\" v-show=\"next\">Next</button>\n\n    </div>\n    <div class=\"box\">\n      <div class=\"messages\">\n        <template v-for=\"user in messages\" :key=\"user.id\">\n          <div style=\"text-align: left;\" v-if=\"user.name === 'Stranger' || user.name === 'Bot'\">\n            <b>{{ user.name }}:</b> {{ user.message }}\n          </div>\n          <div style=\"text-align: right;\" v-else>\n            {{ user.message }} <b>:{{ user.name }}</b>\n          </div>\n        </template>\n      </div>\n      <div class=\"messages\"></div>\n      <form class=\"input-div\" @submit.prevent=\"submitMessage\">\n        <input type=\"text\" placeholder=\"Type in text\" v-model=\"inputMessageText\" />\n        <button type=\"submit\">Submit</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SocketioService from './services/socketio.service.js';\n\nexport default {\n  name: 'App',\n  components: {\n  },\n  mounted() {\n    this.toggleFormElements(\"form.input-div\", true);\n  },\n  data() {\n    return {\n      token: '',\n      inputMessageText: '',\n      messages: [],\n      stop: false,\n      next: false\n    };\n  },\n  methods: {\n    toggleFormElements(formSelected, bDisabled) {\n      let form = document.querySelector(formSelected);\n      let inputs = form.getElementsByTagName(\"input\");\n      for (let i = 0; i < inputs.length; i++) {\n        inputs[i].disabled = bDisabled;\n      }\n      let selects = form.getElementsByTagName(\"select\");\n      for (let i = 0; i < selects.length; i++) {\n        selects[i].disabled = bDisabled;\n      }\n      let textareas = form.getElementsByTagName(\"textarea\");\n      for (let i = 0; i < textareas.length; i++) {\n        textareas[i].disabled = bDisabled;\n      }\n      let buttons = form.getElementsByTagName(\"button\");\n      for (let i = 0; i < buttons.length; i++) {\n        buttons[i].disabled = bDisabled;\n      }\n    },\n    submitToken() {\n      console.log(this.token);\n      SocketioService.setupSocketConnection(this.token);\n      SocketioService.statusRoom((err, data) => {\n        console.log(data);\n        if (data.message.includes(\"NextRoom\")) {\n          data.message = data.message.substr(8, data.message.length - 1);\n          this.stop = false; this.next = false;\n          this.toggleFormElements(\"form.input-div\", true);\n        }\n        else if (this.messages.length > 0) {\n          this.messages = [];\n        }\n        if (data.message.includes(\"Strangers have entered the room\")) {\n          const chatRoom = data.message.substr(data.message.indexOf(\"|\") + 1, data.message.length - 1);\n          localStorage.setItem('chatRoom', chatRoom);\n          data.message = data.message.substr(0, data.message.indexOf(\"|\"));\n          this.toggleFormElements(\"form.input-div\", false);\n          this.stop = true; this.next = true;\n        }\n        if (data.message === 'The stranger has escaped. Waiting for the next one ....') {\n          this.stop = false; this.next = false;\n          this.toggleFormElements(\"form.input-div\", true);\n        }\n        this.messages.push(data);\n      });\n      SocketioService.receiveMessage((err, data) => {\n        console.log(data);\n        this.messages.push(data);\n      });\n    },\n    submitMessage() {\n      console.log(\"sending message....\");\n      const message = this.inputMessageText;\n      SocketioService.sendMessage(message, cb => {\n        // callback is acknowledgement from server\n        console.log(cb);\n        this.messages.push({\n          message,\n          name: \"Me\"\n        });\n        // clear the input after the message is sent\n        this.inputMessageText = '';\n      });\n    },\n    stopChat() {\n      SocketioService.disconnect();\n      this.messages.push({\n        message: \"You left room !\",\n        name: \"Bot\"\n      });\n      this.toggleFormElements(\"form.input-div\", true);\n      localStorage.clear();\n      // clear the input after the message is sent\n          this.stop = false; this.next = false;\n      this.inputMessageText = '';\n\n    },\n    nextRoom() {\n      // SocketioService.disconnect();\n      this.messages = [{ message: \"Waiting for a stranger ...\", name: \"Bot\" }];\n          this.stop = false; this.next = false;\n      // this.submitToken();\n      SocketioService.nextRoom();\n    }\n  },\n  beforeUnmount() {\n    SocketioService.disconnect();\n  }\n\n}\n</script>\n\n<style>\n.App {\n  padding: 1rem;\n}\n\n.box {\n  width: fit-content;\n  height: 400px;\n  border: solid 1px #000;\n  display: flex;\n  flex-direction: column;\n  margin-top: 1rem;\n  width: 310px;\n  overflow: scroll;\n}\n\n.messages {\n  flex-grow: 1;\n}\n\n.input-div {\n  display: flex;\n  width: 100%;\n}\n</style>"],"sourceRoot":""}]}